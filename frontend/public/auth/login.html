<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Silk Route Logistics â€” Account Executive Portal</title>
  <link rel="icon" href="/logo.png" type="image/png">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',system-ui,-apple-system,sans-serif;background:#0a1628;color:#e0e0e0;overflow:hidden;height:100vh}

    /* === SPLIT LAYOUT === */
    .login-container{display:flex;height:100vh}

    /* === LEFT PANEL === */
    .left-panel{
      width:55%;position:relative;overflow:hidden;
      background:linear-gradient(165deg,#1b3a5e 0%,#224870 40%,#285280 70%,#1e4060 100%);
      display:flex;align-items:center;justify-content:center;
    }
    .left-panel::before{
      content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;
      background:radial-gradient(ellipse at 25% 35%,rgba(200,150,62,0.14) 0%,transparent 45%),
                 radial-gradient(ellipse at 70% 70%,rgba(200,150,62,0.10) 0%,transparent 45%),
                 radial-gradient(ellipse at 50% 15%,rgba(120,180,240,0.07) 0%,transparent 40%);
      animation:gradientShift 20s ease-in-out infinite alternate;
    }
    @keyframes gradientShift{0%{transform:translate(0,0) rotate(0deg)}100%{transform:translate(30px,-20px) rotate(2deg)}}

    .particle{position:absolute;border-radius:50%;background:rgba(200,150,62,0.18);animation:float 25s ease-in-out infinite}
    @keyframes float{
      0%,100%{transform:translateY(0) translateX(0);opacity:.15}
      25%{transform:translateY(-30px) translateX(10px);opacity:.3}
      50%{transform:translateY(-15px) translateX(-10px);opacity:.22}
      75%{transform:translateY(-40px) translateX(5px);opacity:.15}
    }

    .left-content{
      position:relative;z-index:2;padding:60px;max-width:520px;width:100%;
      display:flex;flex-direction:column;justify-content:center;min-height:100vh;
    }
    .brand-logo{height:52px;width:52px;object-fit:contain;margin-bottom:32px;opacity:.95;border-radius:12px;background:rgba(255,255,255,0.08);padding:6px}

    /* === HERO SLIDESHOW === */
    .hero-slideshow{
      position:relative;width:100%;height:170px;border-radius:16px;overflow:hidden;margin-bottom:28px;
      box-shadow:0 8px 40px rgba(0,0,0,0.35),0 0 60px rgba(200,150,62,0.06);
      border:1px solid rgba(200,150,62,0.15);
    }
    .hero-slide{
      position:absolute;inset:0;opacity:0;transition:opacity 1.2s ease-in-out;
      display:flex;align-items:center;justify-content:center;
    }
    .hero-slide.active{opacity:1}
    /* Frosted glass overlay on all slides */
    .hero-slide::after{
      content:'';position:absolute;inset:0;
      background:rgba(255,255,255,0.02);
      backdrop-filter:blur(1px);
      pointer-events:none;
    }
    .hero-slide-1{
      background:linear-gradient(135deg,#1e4468 0%,#275580 30%,#2f6090 60%,#224c72 100%);
    }
    .hero-slide-1::before{
      content:'';position:absolute;inset:0;
      background:
        radial-gradient(ellipse at 20% 50%,rgba(200,150,62,0.18) 0%,transparent 50%),
        radial-gradient(ellipse at 80% 40%,rgba(200,150,62,0.12) 0%,transparent 45%),
        url("data:image/svg+xml,%3Csvg width='500' height='170' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,85 Q80,30 160,85 Q240,140 320,85 Q400,30 500,85' stroke='%23c8a95170' stroke-width='2.5' fill='none' stroke-dasharray='8,6'/%3E%3Cpath d='M0,105 Q100,50 200,105 Q300,155 400,105 Q450,80 500,95' stroke='%23c8a95140' stroke-width='1.5' fill='none'/%3E%3Ccircle cx='80' cy='68' r='5' fill='%23c8a95160'/%3E%3Ccircle cx='240' cy='100' r='4' fill='%23c8a95150'/%3E%3Ccircle cx='400' cy='72' r='5' fill='%23c8a95160'/%3E%3C/svg%3E") center/cover no-repeat;
    }
    .slide-text{position:relative;z-index:2;text-align:center;padding:0 30px}
    .slide-text span{font-size:11px;letter-spacing:3px;text-transform:uppercase;color:#dbb960;font-weight:600}
    .slide-text p{font-size:18px;color:#f0f4f8;font-weight:300;margin-top:8px;line-height:1.4}
    .hero-slide-2{
      background:linear-gradient(160deg,#1b3e60 0%,#234e78 40%,#2a5888 70%,#1f4468 100%);
    }
    .hero-slide-2::before{
      content:'';position:absolute;inset:0;
      background:
        radial-gradient(ellipse at 50% 50%,rgba(200,150,62,0.16) 0%,transparent 50%),
        url("data:image/svg+xml,%3Csvg width='500' height='170' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='85' r='40' stroke='%23c8a95148' stroke-width='2' fill='none'/%3E%3Ccircle cx='250' cy='85' r='55' stroke='%23c8a95138' stroke-width='2' fill='none'/%3E%3Ccircle cx='400' cy='85' r='35' stroke='%23c8a95148' stroke-width='2' fill='none'/%3E%3Cline x1='140' y1='85' x2='195' y2='85' stroke='%23c8a95155' stroke-width='2' stroke-dasharray='4,4'/%3E%3Cline x1='305' y1='85' x2='365' y2='85' stroke='%23c8a95155' stroke-width='2' stroke-dasharray='4,4'/%3E%3Ccircle cx='100' cy='85' r='6' fill='%23c8a95160'/%3E%3Ccircle cx='250' cy='85' r='6' fill='%23c8a95160'/%3E%3Ccircle cx='400' cy='85' r='6' fill='%23c8a95160'/%3E%3C/svg%3E") center/cover no-repeat;
    }
    .hero-slide-3{
      background:linear-gradient(145deg,#1c4060 0%,#254e78 35%,#2c5a8a 65%,#204668 100%);
    }
    .hero-slide-3::before{
      content:'';position:absolute;inset:0;
      background:
        radial-gradient(ellipse at 35% 60%,rgba(200,150,62,0.16) 0%,transparent 45%),
        radial-gradient(ellipse at 75% 30%,rgba(200,150,62,0.12) 0%,transparent 40%),
        url("data:image/svg+xml,%3Csvg width='500' height='170' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50,135 L50,55 L150,55' stroke='%23c8a95155' stroke-width='2' fill='none'/%3E%3Cpath d='M150,55 L150,115 L280,115' stroke='%23c8a95155' stroke-width='2' fill='none'/%3E%3Cpath d='M280,115 L280,45 L420,45' stroke='%23c8a95155' stroke-width='2' fill='none'/%3E%3Cpath d='M420,45 L420,125 L480,125' stroke='%23c8a95155' stroke-width='2' fill='none'/%3E%3Ccircle cx='50' cy='135' r='6' fill='%23c8a95165'/%3E%3Ccircle cx='150' cy='55' r='5' fill='%23c8a95158'/%3E%3Ccircle cx='280' cy='115' r='5' fill='%23c8a95158'/%3E%3Ccircle cx='420' cy='45' r='5' fill='%23c8a95158'/%3E%3Ccircle cx='480' cy='125' r='6' fill='%23c8a95165'/%3E%3C/svg%3E") center/cover no-repeat;
    }
    .slideshow-dots{display:flex;justify-content:center;gap:8px;margin-top:12px}
    .slideshow-dot{width:6px;height:6px;border-radius:50%;background:rgba(200,150,62,0.25);transition:all .4s ease}
    .slideshow-dot.active{background:#dbb960;width:20px;border-radius:3px}
    .brand-name{font-size:13px;font-weight:600;letter-spacing:4px;text-transform:uppercase;color:#c8a951;margin-bottom:4px}
    .portal-name{font-size:28px;font-weight:700;color:#fff;margin-bottom:6px;letter-spacing:-.5px}
    .portal-subtitle{font-size:14px;color:#7a9bb8;font-weight:400;margin-bottom:40px}

    .features-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:36px}
    .feature-pill{
      display:flex;align-items:center;gap:10px;padding:13px 16px;border-radius:10px;
      background:rgba(200,150,62,0.07);border:1px solid rgba(200,150,62,0.14);transition:all .3s ease;
      backdrop-filter:blur(4px);
    }
    .feature-pill:hover{background:rgba(200,150,62,0.13);border-color:rgba(200,150,62,0.25);transform:translateY(-1px)}
    .feature-pill .icon{display:inline-flex;color:#dbb960;line-height:0}
    .feature-pill .label{font-size:12.5px;color:#c8d4de;font-weight:500;letter-spacing:.3px}

    .tagline{font-size:13.5px;color:#7a9ab5;line-height:1.75;margin-bottom:40px;max-width:440px}

    /* === DAILY INSIGHT CARD === */
    .insight-card{
      padding:24px 28px;border-radius:12px;position:relative;overflow:hidden;
      background:linear-gradient(135deg,rgba(200,150,62,0.08) 0%,rgba(200,150,62,0.03) 100%);
      border-left:3px solid #dbb960;
      backdrop-filter:blur(4px);
    }
    .insight-content{position:relative;z-index:1}
    .insight-label{font-size:9.5px;font-weight:600;letter-spacing:2.5px;text-transform:uppercase;color:#dbb960;margin-bottom:10px}
    .insight-text{font-size:14.5px;color:#dce4ec;line-height:1.7;font-style:italic;max-width:380px}
    .insight-source{font-size:11px;color:#5d7a8e;margin-top:12px;font-style:normal}

    .silk-road-line{margin-top:auto;padding-top:40px;opacity:.2}
    .left-footer{font-size:11px;color:#4d6878;margin-top:16px}

    /* === RIGHT PANEL === */
    .right-panel{
      width:45%;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg,#101d2e 0%,#0c1825 100%);
      border-left:1px solid rgba(200,150,62,0.06);position:relative;overflow-y:auto;
    }
    .login-card{width:100%;max-width:380px;padding:40px}

    .form-logo{display:flex;flex-direction:column;align-items:center;margin-bottom:32px}
    .form-logo img{height:48px;margin-bottom:14px;border-radius:10px}
    .form-logo h2{font-size:20px;font-weight:600;color:#c8a951}
    .form-logo p{font-size:13px;color:#6a8090;margin-top:4px}

    .alert-banner{padding:12px 16px;border-radius:8px;font-size:13px;margin-bottom:20px;display:none;text-align:center;line-height:1.5}
    .alert-error{background:rgba(220,38,38,0.08);border:1px solid rgba(220,38,38,0.2);color:#f87171}
    .alert-warning{background:rgba(202,138,4,0.08);border:1px solid rgba(202,138,4,0.2);color:#fbbf24}
    .alert-success{background:rgba(34,197,94,0.08);border:1px solid rgba(34,197,94,0.2);color:#4ade80}

    .field-group{margin-bottom:18px}
    .field-label{font-size:11.5px;font-weight:500;color:#8899aa;text-transform:uppercase;letter-spacing:1px;margin-bottom:7px;display:block}
    .field-input{
      width:100%;padding:13px 16px;font-size:14.5px;font-family:'Inter',sans-serif;
      background:#162236;border:1px solid #243447;border-radius:8px;color:#e8edf2;
      outline:none;transition:all .25s ease;
    }
    .field-input:focus{border-color:#c8a951;box-shadow:0 0 0 3px rgba(200,150,62,0.1);background:#1a2840}
    .field-input::placeholder{color:#4a5e70}

    .form-options{display:flex;align-items:center;justify-content:space-between;margin:4px 0 24px}
    .remember-label{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:13px;color:#8899aa}
    .remember-label input[type="checkbox"]{width:15px;height:15px;accent-color:#c8a951;cursor:pointer}
    .forgot-link{font-size:13px;color:#c8a951;text-decoration:none;font-weight:500;transition:opacity .2s}
    .forgot-link:hover{opacity:.8}

    .btn-submit{
      width:100%;padding:14px;font-size:15px;font-weight:600;font-family:'Inter',sans-serif;
      background:linear-gradient(135deg,#c8a951 0%,#b8963e 100%);
      color:#0D1B2A;border:none;border-radius:8px;cursor:pointer;transition:all .25s ease;
    }
    .btn-submit:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(200,150,62,0.25)}
    .btn-submit:active{transform:translateY(0)}
    .btn-submit:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}

    .divider{display:flex;align-items:center;margin:20px 0;gap:12px}
    .divider-line{flex:1;height:1px;background:#1f3044}
    .divider-text{font-size:12px;color:#4a5e70}

    .btn-secondary{
      width:100%;padding:13px;font-size:14px;font-weight:500;font-family:'Inter',sans-serif;
      background:transparent;color:#c8a951;text-decoration:none;
      border:1px solid rgba(200,150,62,0.25);border-radius:8px;cursor:pointer;
      transition:all .25s ease;display:flex;align-items:center;justify-content:center;gap:8px;
    }
    .btn-secondary:hover{background:rgba(200,150,62,0.05);border-color:rgba(200,150,62,0.4)}

    .security-badge{display:flex;align-items:center;justify-content:center;gap:6px;margin-top:28px;font-size:11px;color:#3a5060}
    .security-badge svg{opacity:.4}

    .otp-section{display:none}
    .otp-section.show{display:block}
    .email-section.hide{display:none}
    .back-link{text-align:center;margin-top:16px}
    .back-link a{color:#6a8090;font-size:13px;cursor:pointer;text-decoration:underline;font-family:'Inter',sans-serif}
    .back-link a:hover{color:#c8a951}

    @media(max-width:900px){.left-panel{display:none}.right-panel{width:100%;border-left:none}}
    @media(max-width:480px){.login-card{padding:24px 20px}}

    .spinner{display:inline-block;width:18px;height:18px;border:2px solid rgba(13,27,42,0.3);border-top-color:#0D1B2A;border-radius:50%;animation:spin .6s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <div class="login-container">
    <!-- LEFT PANEL -->
    <div class="left-panel">
      <div class="particle" style="width:4px;height:4px;top:15%;left:20%;animation-delay:0s;animation-duration:22s"></div>
      <div class="particle" style="width:3px;height:3px;top:45%;left:75%;animation-delay:3s;animation-duration:28s"></div>
      <div class="particle" style="width:5px;height:5px;top:70%;left:35%;animation-delay:7s;animation-duration:25s"></div>
      <div class="particle" style="width:3px;height:3px;top:25%;left:60%;animation-delay:12s;animation-duration:30s"></div>
      <div class="particle" style="width:4px;height:4px;top:80%;left:80%;animation-delay:5s;animation-duration:26s"></div>

      <div class="left-content">
        <img src="/logo-full-alt.png" alt="SRL" class="brand-logo">
        <div class="brand-name">SILK ROUTE LOGISTICS</div>
        <div class="portal-name">Account Executive Portal</div>
        <div class="portal-subtitle">Command center for freight operations</div>

        <div class="features-grid">
          <div class="feature-pill"><span class="icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h4l3 3v5h-7V8z"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg></span><span class="label">Fleet Management</span></div>
          <div class="feature-pill"><span class="icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></span><span class="label">Secure Payments</span></div>
          <div class="feature-pill"><span class="icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg></span><span class="label">Carrier Network</span></div>
          <div class="feature-pill"><span class="icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M18 20V10M12 20V4M6 20v-6"/></svg></span><span class="label">Live Analytics</span></div>
        </div>

        <div class="hero-slideshow" id="heroSlideshow">
          <div class="hero-slide hero-slide-1 active">
            <div class="slide-text">
              <span>Connecting Routes</span>
              <p>4,000+ miles of trade routes,<br>one seamless platform</p>
            </div>
          </div>
          <div class="hero-slide hero-slide-2">
            <div class="slide-text">
              <span>Carrier Network</span>
              <p>Real-time visibility across<br>every mile of your freight</p>
            </div>
          </div>
          <div class="hero-slide hero-slide-3">
            <div class="slide-text">
              <span>Smart Logistics</span>
              <p>AI-powered matching from<br>pickup to final delivery</p>
            </div>
          </div>
        </div>
        <div class="slideshow-dots" id="slideshowDots">
          <div class="slideshow-dot active"></div>
          <div class="slideshow-dot"></div>
          <div class="slideshow-dot"></div>
        </div>

        <p class="tagline">Asset-based trucking and freight brokerage powered by technology. Real-time tracking, automated invoicing, and AI-driven operations from Kalamazoo, Michigan.</p>

        <div class="insight-card">
          <div class="insight-content">
            <div id="insightLabel" class="insight-label"></div>
            <div id="insightText" class="insight-text"></div>
            <div id="insightSource" class="insight-source"></div>
          </div>
        </div>

        <svg class="silk-road-line" width="100%" height="24" viewBox="0 0 500 24">
          <path d="M0,12 Q60,4 120,12 Q180,20 240,12 Q300,4 360,12 Q420,20 480,12 L500,12" stroke="#c8a951" stroke-width="1.5" fill="none" stroke-dasharray="8,6"/>
          <circle cx="0" cy="12" r="2.5" fill="#c8a951" opacity="0.6"/>
          <circle cx="250" cy="12" r="2" fill="#c8a951" opacity="0.4"/>
          <circle cx="500" cy="12" r="2.5" fill="#c8a951" opacity="0.6"/>
        </svg>

        <div class="left-footer">&copy; 2026 Silk Route Logistics Inc. &bull; Kalamazoo, MI</div>
      </div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="right-panel">
      <div class="login-card">
        <div class="form-logo">
          <img src="/logo.png" alt="Silk Route Logistics">
          <h2>Welcome Back</h2>
          <p>Sign in to your account</p>
        </div>

        <div id="alertBanner" class="alert-banner"></div>

        <!-- Step 1: Email + Password -->
        <div id="email-section" class="email-section">
          <div class="field-group">
            <label class="field-label">Email Address</label>
            <input type="email" id="email" class="field-input" placeholder="you@silkroutelogistics.ai" autocomplete="email">
          </div>
          <div class="field-group">
            <label class="field-label">Password</label>
            <input type="password" id="password" class="field-input" placeholder="Enter your password" autocomplete="current-password">
          </div>
          <div class="form-options">
            <label class="remember-label"><input type="checkbox" id="rememberMe"> Remember me</label>
            <a href="/auth/forgot-password.html" class="forgot-link">Forgot password?</a>
          </div>
          <button id="loginBtn" class="btn-submit" onclick="handleLogin()">Sign In</button>
        </div>

        <!-- Step 2: OTP Verification -->
        <div id="otp-section" class="otp-section">
          <div class="field-group">
            <label class="field-label">Verification Code</label>
            <input type="text" id="otp" class="field-input" placeholder="Enter 8-digit code" maxlength="8" autocomplete="one-time-code" inputmode="numeric">
          </div>
          <button id="otpBtn" class="btn-submit" onclick="handleOtp()">Verify</button>
          <div class="back-link"><a onclick="goBack()">Back to sign in</a></div>
        </div>

        <div class="divider"><div class="divider-line"></div><span class="divider-text">or</span><div class="divider-line"></div></div>
        <a href="/carrier/login.html" class="btn-secondary"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h4l3 3v5h-7V8z"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg> Carrier Login</a>
        <a href="/shipper/login" class="btn-secondary" style="margin-top:8px"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg> Shipper Portal</a>

        <div class="security-badge">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>
          256-bit SSL encrypted &bull; Secure data handling
        </div>
      </div>
    </div>
  </div>

  <script src="/js/auth.js"></script>
  <script>
    var BASE = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
      ? 'http://localhost:4000' : 'https://api.silkroutelogistics.ai';
    var pendingEmail = '';

    // Session expired banner
    if (new URLSearchParams(window.location.search).get('expired') === '1') {
      var b = document.getElementById('alertBanner');
      b.className = 'alert-banner alert-warning'; b.style.display = 'block';
      b.textContent = 'Session expired due to inactivity. Please sign in again.';
    }

    // Auto-fill remembered email
    var savedEmail = SRLAuth.getRememberedEmail('ae');
    if (savedEmail) {
      document.getElementById('email').value = savedEmail;
      document.getElementById('rememberMe').checked = true;
    }

    // If already logged in, redirect
    var existingToken = SRLAuth.getToken('token');
    if (existingToken) {
      fetch(BASE + '/api/auth/me', { headers: { 'Authorization': 'Bearer ' + existingToken } })
        .then(function(r) { if (r.ok) window.location.href = '/ae/dashboard/index.html'; });
    }

    // Enter key support
    document.getElementById('email').addEventListener('keydown', function(e) { if (e.key === 'Enter') document.getElementById('password').focus(); });
    document.getElementById('password').addEventListener('keydown', function(e) { if (e.key === 'Enter') handleLogin(); });
    document.getElementById('otp').addEventListener('keydown', function(e) { if (e.key === 'Enter') handleOtp(); });

    function showAlert(msg, type) {
      var el = document.getElementById('alertBanner');
      el.className = 'alert-banner alert-' + type;
      el.style.display = msg ? 'block' : 'none';
      el.textContent = msg;
    }

    function handleLogin() {
      var email = document.getElementById('email').value.trim();
      var password = document.getElementById('password').value;
      if (!email || !password) { showAlert('Please enter your email and password.', 'error'); return; }

      var btn = document.getElementById('loginBtn');
      btn.disabled = true; btn.innerHTML = '<span class="spinner"></span>';
      showAlert('', 'error');

      fetch(BASE + '/api/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email: email, password: password })
      })
      .then(function(r) { return r.json(); })
      .then(function(data) {
        btn.disabled = false; btn.textContent = 'Sign In';
        if (data.error) { showAlert(data.error, 'error'); return; }
        if (data.pendingOtp) {
          pendingEmail = email;
          document.getElementById('email-section').classList.add('hide');
          document.getElementById('otp-section').classList.add('show');
          showAlert('A verification code has been sent to your email.', 'success');
          setTimeout(function() { document.getElementById('otp').focus(); }, 100);
          return;
        }
        if (data.token) {
          var remember = document.getElementById('rememberMe').checked;
          SRLAuth.setToken('token', data.token, remember);
          localStorage.setItem('user', JSON.stringify(data.user || {}));
          localStorage.setItem('srl_last_activity', Date.now().toString());
          if (remember) SRLAuth.setRememberedEmail(email, 'ae');
          else SRLAuth.setRememberedEmail('', 'ae');
          window.location.href = '/ae/dashboard/index.html';
        }
      })
      .catch(function() {
        btn.disabled = false; btn.textContent = 'Sign In';
        showAlert('Unable to connect to server. Please try again.', 'error');
      });
    }

    function handleOtp() {
      var code = document.getElementById('otp').value.trim();
      if (!code || code.length < 8) { showAlert('Please enter the 8-digit code.', 'error'); return; }

      var btn = document.getElementById('otpBtn');
      btn.disabled = true; btn.innerHTML = '<span class="spinner"></span>';
      showAlert('', 'error');

      fetch(BASE + '/api/auth/verify-otp', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email: pendingEmail, code: code })
      })
      .then(function(r) { return r.json(); })
      .then(function(data) {
        btn.disabled = false; btn.textContent = 'Verify';
        if (data.error) { showAlert(data.error, 'error'); return; }
        if (data.token) {
          var remember = document.getElementById('rememberMe').checked;
          SRLAuth.setToken('token', data.token, remember);
          localStorage.setItem('user', JSON.stringify(data.user || {}));
          localStorage.setItem('srl_last_activity', Date.now().toString());
          if (remember) SRLAuth.setRememberedEmail(pendingEmail, 'ae');
          else SRLAuth.setRememberedEmail('', 'ae');
          var redirect = new URLSearchParams(window.location.search).get('redirect');
          window.location.href = redirect || '/ae/dashboard/index.html';
        }
      })
      .catch(function() {
        btn.disabled = false; btn.textContent = 'Verify';
        showAlert('Unable to connect to server. Please try again.', 'error');
      });
    }

    function goBack() {
      document.getElementById('email-section').classList.remove('hide');
      document.getElementById('otp-section').classList.remove('show');
      document.getElementById('otp').value = '';
      showAlert('', 'error');
    }
  </script>

  <!-- Hero Slideshow Auto-Play -->
  <script>
    (function() {
      var slides = document.querySelectorAll('.hero-slide');
      var dots = document.querySelectorAll('.slideshow-dot');
      var current = 0;
      setInterval(function() {
        slides[current].classList.remove('active');
        dots[current].classList.remove('active');
        current = (current + 1) % slides.length;
        slides[current].classList.add('active');
        dots[current].classList.add('active');
      }, 3000);
    })();
  </script>

  <!-- Daily Insight System -->
  <script>
    (function() {
      var aeFacts = [
        { cat:"INDUSTRY FACT", text:"The U.S. trucking industry generates over $940.8 billion in gross freight revenue annually.", src:"American Trucking Associations, 2024" },
        { cat:"DID YOU KNOW", text:"Trucks move 72.6% of all freight tonnage in the United States \u2014 11.46 billion tons per year.", src:"American Trucking Associations" },
        { cat:"INDUSTRY FACT", text:"There are approximately 3.54 million professional truck drivers in America making deliveries possible every day.", src:"Bureau of Labor Statistics" },
        { cat:"GROWTH", text:"Freight volumes are projected to grow 25.6% by 2034, creating massive opportunities for tech-forward brokerages.", src:"ATA Freight Transportation Forecast" },
        { cat:"OPERATIONS", text:"The average marginal cost to operate a commercial truck is $2.27 per mile, with fuel at 29% of total costs.", src:"ATRI Operational Costs of Trucking, 2024" },
        { cat:"PERSPECTIVE", text:"If the trucking industry were a country, its revenue would make it the 18th largest economy in the world.", src:"World Bank / ATA" },
        { cat:"DID YOU KNOW", text:"Over 80% of U.S. communities depend exclusively on trucks for delivery of their goods and daily necessities.", src:"American Trucking Associations" },
        { cat:"OPERATIONS", text:"The trucking industry purchases over 54 billion gallons of diesel fuel annually in the United States.", src:"ATA / U.S. Energy Information Administration" },
        { cat:"DID YOU KNOW", text:"American trucks travel over 327.5 billion miles per year \u2014 enough to make 683,000 trips to the moon.", src:"Federal Highway Administration" },
        { cat:"PERSPECTIVE", text:"Without trucks, grocery store shelves would be empty within 3 days and hospitals within 24 hours.", src:"ATA: When Trucks Stop, America Stops" },
        { cat:"INDUSTRY FACT", text:"There are over 1.1 million trucking companies in the U.S., with 97% operating 20 or fewer trucks.", src:"FMCSA Registration Data" },
        { cat:"BROKERAGE", text:"Average broker gross margin in 2024 was 15\u201318% on spot freight and 10\u201312% on contract freight.", src:"DAT Freight & Analytics" },
        { cat:"BROKERAGE", text:"The top 10 freight brokerages control only 15% of the $200+ billion brokerage market \u2014 opportunity is everywhere.", src:"Transport Topics Top 100" },
        { cat:"TECHNOLOGY", text:"Brokerages using AI-powered carrier matching report 35\u201340% faster load coverage and 15% lower fall-off rates.", src:"FreightWaves / McKinsey" },
        { cat:"PAYMENTS", text:"Carriers who receive payment within 7 days are 3x more likely to accept future loads from the same broker.", src:"TriumphPay, 2024" },
        { cat:"TECHNOLOGY", text:"Digital freight matching platforms have grown 300% since 2020, transforming how loads meet carriers.", src:"FreightWaves" },
        { cat:"MOTIVATION", text:"The secret of getting ahead is getting started.", src:"Mark Twain" },
        { cat:"MOTIVATION", text:"Success is not final, failure is not fatal: it is the courage to continue that counts.", src:"Winston Churchill" },
        { cat:"MOTIVATION", text:"The only way to do great work is to love what you do.", src:"Steve Jobs" },
        { cat:"MOTIVATION", text:"Don\u2019t watch the clock; do what it does. Keep going.", src:"Sam Levenson" },
        { cat:"MOTIVATION", text:"It always seems impossible until it\u2019s done.", src:"Nelson Mandela" },
        { cat:"MOTIVATION", text:"The best time to plant a tree was 20 years ago. The second best time is now.", src:"Chinese Proverb" },
        { cat:"MOTIVATION", text:"Hard work beats talent when talent doesn\u2019t work hard.", src:"Tim Notke" },
        { cat:"MOTIVATION", text:"A journey of a thousand miles begins with a single step.", src:"Lao Tzu" },
        { cat:"MOTIVATION", text:"Opportunities don\u2019t happen. You create them.", src:"Chris Grosser" },
        { cat:"SILK ROAD HISTORY", text:"The Silk Road stretched over 4,000 miles, connecting Chang\u2019an to Constantinople for over 1,500 years.", src:"UNESCO / Britannica" },
        { cat:"SILK ROAD HISTORY", text:"Marco Polo traveled the Silk Road for 24 years, documenting trade routes that inspired global commerce.", src:"National Geographic" },
        { cat:"SILK ROAD HISTORY", text:"The Silk Road carried spices, gold, ideas, religions, and technology between civilizations.", src:"Encyclop\u00e6dia Britannica" },
        { cat:"SILK ROAD HISTORY", text:"Caravansaries \u2014 ancient rest stops every 20 miles \u2014 were the original truck stops for merchants.", src:"UNESCO Heritage Studies" },
        { cat:"SILK ROAD HISTORY", text:"The Silk Road was the world\u2019s first global supply chain, proving trade builds bridges between nations.", src:"Peter Frankopan, The Silk Roads" },
        { cat:"SRL PHILOSOPHY", text:"Carriers first. Earn shipper trust. Non-stop communication. That\u2019s the Silk Route way.", src:"Silk Route Logistics" },
        { cat:"SRL MISSION", text:"We don\u2019t just move freight \u2014 we build partnerships that move North America forward.", src:"Silk Route Logistics" },
        { cat:"SRL VISION", text:"Technology serves people, not the other way around. Every tool we build starts with the carrier experience.", src:"Silk Route Logistics" },
        { cat:"SRL PROMISE", text:"Transparent rates. Fast payment. Zero double-brokering. Your freight, our word.", src:"Silk Route Logistics" }
      ];

      var today = new Date();
      var start = new Date(today.getFullYear(), 0, 0);
      var dayOfYear = Math.floor((today - start) / 86400000);
      var f = aeFacts[dayOfYear % aeFacts.length];

      document.getElementById('insightLabel').textContent = f.cat;
      document.getElementById('insightText').textContent = '\u201c' + f.text + '\u201d';
      document.getElementById('insightSource').textContent = '\u2014 ' + f.src;
    })();
  </script>
</body>
</html>
